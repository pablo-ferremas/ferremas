import{a as y}from"./chunk-3OBRYY6M.js";import{a as D,b as O}from"./chunk-PIR5CKZV.js";import{a as w,b as N,c as T}from"./chunk-MKH4L2WN.js";import"./chunk-FTKAUQPB.js";import{b as E}from"./chunk-SZIRPOAJ.js";import"./chunk-QVTE7ZQO.js";import"./chunk-I2XG45E3.js";import"./chunk-OV6FUWXQ.js";import{$ as v,Ca as l,Ha as f,Ma as g,Sb as I,Ta as d,Tb as _,Wb as S,Xa as n,Ya as i,Za as m,_ as u,ab as C,bb as P,cb as s,ib as c,kb as p,mb as x,wb as b,ya as a,zb as h}from"./chunk-TVOLU7LP.js";function A(o,t){if(o&1&&(n(0,"div",10)(1,"div",11)(2,"span",12),c(3,"Cargando productos..."),i()(),n(4,"p",13),c(5),i()()),o&2){let e=s();a(5),p("Cargando productos de ",e.categoriaNombre,"...")}}function M(o,t){if(o&1&&(n(0,"div",1)(1,"div",2)(2,"div",14),m(3,"i",15),c(4),i()()()),o&2){let e=s();a(4),p("",e.error," ")}}function R(o,t){o&1&&(n(0,"div",1)(1,"div",2)(2,"div",16)(3,"h4"),m(4,"i",17),c(5,"No hay productos disponibles"),i(),n(6,"p"),c(7,"Esta categor\xEDa no tiene productos disponibles en este momento. \xA1Vuelve pronto para ver nuevos productos!"),i()()()())}function B(o,t){if(o&1&&(n(0,"div",26),m(1,"app-card",27),i()),o&2){let e=t.$implicit;a(),d("producto",e)}}function $(o,t){if(o&1){let e=C();n(0,"div")(1,"div",1)(2,"div",2)(3,"div",18)(4,"p",19),m(5,"i",20),c(6),i(),n(7,"div",21),m(8,"i",22),c(9),i()()()(),n(10,"div",1),g(11,B,2,1,"div",23),b(12,"paginacion"),i(),n(13,"div",24)(14,"div",2)(15,"app-paginacion",25),P("pageChanged",function(F){u(e);let j=s();return v(j.onPageChanged(F))}),i()()()()}if(o&2){let e=s();a(6),x(" ",e.totalItems," producto",e.totalItems!==1?"s":""," en ",e.categoriaNombre," "),a(3),p("",e.categoriaNombre," "),a(2),d("ngForOf",h(12,9,e.productos,e.currentPage,e.itemsPerPage)),a(4),d("totalItems",e.totalItems)("itemsPerPage",e.itemsPerPage)("currentPage",e.currentPage)("maxVisiblePages",5)}}function k(o,t){if(o&1&&(n(0,"div",28)(1,"div",2)(2,"div",29)(3,"h5"),m(4,"i",17),c(5),i(),n(6,"p",30),c(7,"Todos los productos mostrados pertenecen a esta categor\xEDa y est\xE1n disponibles para compra."),i()()()()),o&2){let e=s();a(5),p("Categor\xEDa: ",e.categoriaNombre,"")}}var V=class o{constructor(t,e,r){this.productoService=t;this.categoriaService=e;this.route=r}categoriaId;categoriaNombre="";productos=[];currentPage=1;itemsPerPage=8;totalItems=0;loading=!0;error="";ngOnInit(){this.route.params.subscribe(t=>{this.categoriaId=+t.id,this.cargarCategoria(),this.cargarProductosPorCategoria()})}cargarCategoria(){this.categoriaService.getCategoriaPorId(this.categoriaId).subscribe(t=>{t?this.categoriaNombre=t.nombre:console.error("Categor\xEDa no encontrada")})}cargarProductosPorCategoria(){this.loading=!0,this.error="",this.productoService.getProductosPorCategoria(this.categoriaId).subscribe({next:t=>{this.productos=t.filter(e=>!e.oculto),this.totalItems=this.productos.length,this.loading=!1},error:t=>{this.error="Error al cargar los productos de la categor\xEDa",this.loading=!1,console.error("Error:",t)}})}onPageChanged(t){this.currentPage=t,window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||o)(l(T),l(y),l(E))};static \u0275cmp=f({type:o,selectors:[["app-categoria-producto"]],decls:14,vars:6,consts:[[1,"container","mt-5","pt-5"],[1,"row"],[1,"col-12"],[1,"text-center","mb-4"],[1,"fas","fa-layer-group","me-2","text-primary"],[1,"text-center","text-muted","mb-5"],["class","text-center my-5",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],["class","row mt-5",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted"],["role","alert",1,"alert","alert-danger","text-center"],[1,"fas","fa-exclamation-triangle","me-2"],["role","alert",1,"alert","alert-info","text-center"],[1,"fas","fa-info-circle","me-2"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"text-muted","mb-0"],[1,"fas","fa-box","me-1"],[1,"badge","bg-primary","fs-6"],[1,"fas","fa-layer-group","me-1"],["class","col-lg-3 col-md-4 col-sm-6 mb-4",4,"ngFor","ngForOf"],[1,"row","mt-4"],[3,"pageChanged","totalItems","itemsPerPage","currentPage","maxVisiblePages"],[1,"col-lg-3","col-md-4","col-sm-6","mb-4"],[3,"producto"],[1,"row","mt-5"],[1,"alert","alert-info","text-center"],[1,"mb-0"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),m(4,"i",4),c(5),i(),n(6,"p",5),c(7,"Descubre todos los productos de esta categor\xEDa"),i()()(),g(8,A,6,1,"div",6)(9,M,5,1,"div",7)(10,R,8,0,"div",7)(11,$,16,13,"div",8)(12,k,8,1,"div",9),i(),m(13,"app-modal-compra")),e&2&&(a(5),p("",r.categoriaNombre," "),a(3),d("ngIf",r.loading),a(),d("ngIf",r.error&&!r.loading),a(),d("ngIf",!r.loading&&!r.error&&r.productos.length===0),a(),d("ngIf",!r.loading&&!r.error&&r.productos.length>0),a(),d("ngIf",!r.loading&&!r.error&&r.productos.length>0))},dependencies:[S,I,_,w,N,D,O],encapsulation:2})};export{V as CategoriaProductoComponent};
