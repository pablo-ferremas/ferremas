import{O as c,T as i,bc as p,dc as d,k as b,n,r as t,z as m}from"./chunk-TVOLU7LP.js";var o=class e{constructor(r){this.http=r}baseUrl=`${d.apiUrl}`;getMarcas(){return this.http.get(`${this.baseUrl}/marcas`)}getMarcaById(r){return this.http.get(`${this.baseUrl}/marcas/${r}`)}createMarca(r){return this.http.post(`${this.baseUrl}/marcas`,r)}updateMarca(r,a){return this.http.put(`${this.baseUrl}/marcas/${r}`,a)}deleteMarca(r){return this.http.delete(`${this.baseUrl}/marcas/${r}`)}static \u0275fac=function(a){return new(a||e)(i(p))};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};var l=class e{constructor(r){this.marcaApiService=r;this.cargarMarcasIniciales()}marcasSource=new b([]);marcas$=this.marcasSource.asObservable();cargarMarcasIniciales(){console.log("Cargando marcas desde backend..."),this.marcaApiService.getMarcas().pipe(t(r=>r),m(r=>(console.error("Error cargando marcas desde backend:",r),console.warn("Usando marcas por defecto"),n(this.obtenerMarcasPorDefecto())))).subscribe(r=>{console.log("Marcas cargadas:",r),this.marcasSource.next(r)})}obtenerMarcasPorDefecto(){return[{id:1,nombre:"Bosch"},{id:2,nombre:"Makita"},{id:3,nombre:"DeWalt"},{id:4,nombre:"Black+Decker"},{id:5,nombre:"Stanley"}]}getMarcas(){return this.marcas$}getMarcaPorId(r){return this.marcas$.pipe(t(a=>a.find(s=>s.id===r)))}getMarcaPorIdFromBackend(r){return this.marcaApiService.getMarcaById(r).pipe(m(a=>(console.error("Error obteniendo marca desde backend:",a),n(void 0))))}refreshMarcas(){console.log("Refrescando marcas desde backend..."),this.cargarMarcasIniciales()}buscarMarcas(r){return this.marcas$.pipe(t(a=>a.filter(s=>s.nombre.toLowerCase().includes(r.toLowerCase()))))}getMarcasActuales(){return this.marcasSource.value}static \u0275fac=function(a){return new(a||e)(i(o))};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};export{l as a};
