import{a as E}from"./chunk-2OXMHON5.js";import{a as N,b as T}from"./chunk-PIR5CKZV.js";import{a as O,b as y,c as w}from"./chunk-MKH4L2WN.js";import"./chunk-FTKAUQPB.js";import{b as S}from"./chunk-SZIRPOAJ.js";import"./chunk-QVTE7ZQO.js";import"./chunk-I2XG45E3.js";import"./chunk-OV6FUWXQ.js";import{$ as v,Ca as l,Ha as f,Ma as g,Sb as C,Ta as m,Tb as M,Wb as I,Xa as a,Ya as o,Za as d,_ as u,ab as x,bb as P,cb as s,ib as c,kb as p,mb as h,wb as _,ya as n,zb as b}from"./chunk-TVOLU7LP.js";function A(r,t){if(r&1&&(a(0,"div",10)(1,"div",11)(2,"span",12),c(3,"Cargando productos..."),o()(),a(4,"p",13),c(5),o()()),r&2){let e=s();n(5),p("Cargando productos de ",e.marcaNombre,"...")}}function D(r,t){if(r&1&&(a(0,"div",1)(1,"div",2)(2,"div",14),d(3,"i",15),c(4),o()()()),r&2){let e=s();n(4),p("",e.error," ")}}function R(r,t){r&1&&(a(0,"div",1)(1,"div",2)(2,"div",16)(3,"h4"),d(4,"i",17),c(5,"No hay productos disponibles"),o(),a(6,"p"),c(7,"Esta marca no tiene productos disponibles en este momento. \xA1Vuelve pronto para ver nuevos productos!"),o()()()())}function z(r,t){if(r&1&&(a(0,"div",26),d(1,"app-card",27),o()),r&2){let e=t.$implicit;n(),m("producto",e)}}function B(r,t){if(r&1){let e=x();a(0,"div")(1,"div",1)(2,"div",2)(3,"div",18)(4,"p",19),d(5,"i",20),c(6),o(),a(7,"div",21),d(8,"i",22),c(9),o()()()(),a(10,"div",1),g(11,z,2,1,"div",23),_(12,"paginacion"),o(),a(13,"div",24)(14,"div",2)(15,"app-paginacion",25),P("pageChanged",function(F){u(e);let j=s();return v(j.onPageChanged(F))}),o()()()()}if(r&2){let e=s();n(6),h(" ",e.totalItems," producto",e.totalItems!==1?"s":""," de ",e.marcaNombre," "),n(3),p("",e.marcaNombre," "),n(2),m("ngForOf",b(12,9,e.productos,e.currentPage,e.itemsPerPage)),n(4),m("totalItems",e.totalItems)("itemsPerPage",e.itemsPerPage)("currentPage",e.currentPage)("maxVisiblePages",5)}}function Y(r,t){if(r&1&&(a(0,"div",28)(1,"div",2)(2,"div",29)(3,"h5"),d(4,"i",30),c(5),o(),a(6,"p",31),c(7,"Todos los productos mostrados pertenecen a esta marca y est\xE1n disponibles para compra."),o()()()()),r&2){let e=s();n(5),p("Marca: ",e.marcaNombre,"")}}var V=class r{constructor(t,e,i){this.productoService=t;this.marcaService=e;this.route=i}marcaId;marcaNombre="";productos=[];currentPage=1;itemsPerPage=8;totalItems=0;loading=!0;error="";ngOnInit(){this.route.params.subscribe(t=>{this.currentPage=1,this.marcaId=+t.id,this.cargarMarca(),this.cargarProductosPorMarca()})}cargarMarca(){this.marcaService.getMarcaPorId(this.marcaId).subscribe({next:t=>{t?this.marcaNombre=t.nombre:this.error="Marca no encontrada"},error:t=>{console.error("Error al cargar marca:",t),this.marcaNombre="Marca desconocida"}})}cargarProductosPorMarca(){this.loading=!0,this.error="",this.productoService.getProductosPorMarca(this.marcaId).subscribe({next:t=>{this.productos=t.filter(e=>!e.oculto),this.totalItems=this.productos.length,this.loading=!1},error:t=>{this.error="Error al cargar los productos de la marca",this.loading=!1,console.error("Error:",t)}})}onPageChanged(t){this.currentPage=t,window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||r)(l(w),l(E),l(S))};static \u0275cmp=f({type:r,selectors:[["app-marca-producto"]],decls:14,vars:6,consts:[[1,"container","mt-5","pt-5"],[1,"row"],[1,"col-12"],[1,"text-center","mb-4"],[1,"fas","fa-tag","me-2","text-success"],[1,"text-center","text-muted","mb-5"],["class","text-center my-5",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],["class","row mt-5",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"mt-3","text-muted"],["role","alert",1,"alert","alert-danger","text-center"],[1,"fas","fa-exclamation-triangle","me-2"],["role","alert",1,"alert","alert-info","text-center"],[1,"fas","fa-info-circle","me-2"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"text-muted","mb-0"],[1,"fas","fa-box","me-1"],[1,"badge","bg-success","fs-6"],[1,"fas","fa-tag","me-1"],["class","col-lg-3 col-md-4 col-sm-6 mb-4",4,"ngFor","ngForOf"],[1,"row","mt-4"],[3,"pageChanged","totalItems","itemsPerPage","currentPage","maxVisiblePages"],[1,"col-lg-3","col-md-4","col-sm-6","mb-4"],[3,"producto"],[1,"row","mt-5"],[1,"alert","alert-success","text-center"],[1,"fas","fa-tag","me-2"],[1,"mb-0"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),d(4,"i",4),c(5),o(),a(6,"p",5),c(7,"Descubre todos los productos de esta marca"),o()()(),g(8,A,6,1,"div",6)(9,D,5,1,"div",7)(10,R,8,0,"div",7)(11,B,16,13,"div",8)(12,Y,8,1,"div",9),o(),d(13,"app-modal-compra")),e&2&&(n(5),p("",i.marcaNombre," "),n(3),m("ngIf",i.loading),n(),m("ngIf",i.error&&!i.loading),n(),m("ngIf",!i.loading&&!i.error&&i.productos.length===0),n(),m("ngIf",!i.loading&&!i.error&&i.productos.length>0),n(),m("ngIf",!i.loading&&!i.error&&i.productos.length>0))},dependencies:[I,C,M,O,y,N,T],styles:[".container[_ngcontent-%COMP%]{min-height:80vh}h1[_ngcontent-%COMP%]{color:#343a40;font-weight:600}.text-muted[_ngcontent-%COMP%]{font-size:.9rem}.alert[_ngcontent-%COMP%]{border-radius:15px;box-shadow:0 4px 6px #0000001a}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.7}.btn[_ngcontent-%COMP%]{border-radius:25px;font-weight:500;padding:.75rem 1.5rem;transition:all .3s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}h1[_ngcontent-%COMP%]{font-size:1.75rem}.d-flex[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.d-flex[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:1rem;margin-right:0!important}}"]})};export{V as MarcaProductoComponent};
