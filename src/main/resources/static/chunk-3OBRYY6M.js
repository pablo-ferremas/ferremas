import{O as o,T as i,bc as b,dc as C,k as p,n as g,r as t,z as n}from"./chunk-TVOLU7LP.js";var s=class a{constructor(e){this.http=e}baseUrl=`${C.apiUrl}`;getCategorias(){return this.http.get(`${this.baseUrl}/categorias`)}getCategoriaById(e){return this.http.get(`${this.baseUrl}/categorias/${e}`)}createCategoria(e){return this.http.post(`${this.baseUrl}/categorias`,e)}updateCategoria(e,r){return this.http.put(`${this.baseUrl}/categorias/${e}`,r)}deleteCategoria(e){return this.http.delete(`${this.baseUrl}/categorias/${e}`)}static \u0275fac=function(r){return new(r||a)(i(b))};static \u0275prov=o({token:a,factory:a.\u0275fac,providedIn:"root"})};var l=class a{constructor(e){this.categoriaApiService=e;this.cargarCategoriasIniciales()}categoriasSource=new p([]);categorias$=this.categoriasSource.asObservable();cargarCategoriasIniciales(){console.log("Cargando categor\xEDas desde backend..."),this.categoriaApiService.getCategorias().pipe(t(e=>e),n(e=>(console.error("Error cargando categor\xEDas desde backend:",e),console.warn("Usando categor\xEDas por defecto"),g(this.obtenerCategoriasPorDefecto())))).subscribe(e=>{console.log("Categor\xEDas cargadas:",e),this.categoriasSource.next(e)})}obtenerCategoriasPorDefecto(){return[]}getCategorias(){return this.categorias$}getCategoriaPorId(e){return this.categorias$.pipe(t(r=>r.find(c=>c.id===e)))}getCategoriaPorIdFromBackend(e){return this.categoriaApiService.getCategoriaById(e).pipe(t(r=>r),n(r=>(console.error("Error obteniendo categor\xEDa por ID desde backend:",r),g(void 0))))}refreshCategorias(){console.log("Refrescando categor\xEDas..."),this.cargarCategoriasIniciales()}buscarCategorias(e){return this.categorias$.pipe(t(r=>r.filter(c=>c.nombre.toLowerCase().includes(e.toLowerCase()))))}getCategoriasActuales(){return this.categoriasSource.value}static \u0275fac=function(r){return new(r||a)(i(s))};static \u0275prov=o({token:a,factory:a.\u0275fac,providedIn:"root"})};export{l as a};
