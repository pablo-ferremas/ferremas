import{a as ae}from"./chunk-3OBRYY6M.js";import{a as se}from"./chunk-2OXMHON5.js";import{a as fe,b as me}from"./chunk-FTKAUQPB.js";import{a as Z,c as te,d as y,e as ie,f as ne,g as oe,h as re,i as B,j as E}from"./chunk-SZIRPOAJ.js";import{q as le}from"./chunk-QVTE7ZQO.js";import{a as ce,b as de}from"./chunk-OV6FUWXQ.js";import{$ as g,$a as P,Ca as b,Ha as S,Ma as u,O as D,Sa as W,Sb as N,T as M,Ta as l,Tb as V,Ua as X,Va as Y,Wb as F,Xa as n,Ya as o,Za as s,_ as v,_a as O,ab as k,bb as C,cb as m,cc as ee,d as ue,ib as c,jb as w,kb as f,tb as _,ub as G,va as Q,wb as R,xb as T,ya as a}from"./chunk-TVOLU7LP.js";var be=()=>["/"],Ce=()=>({exact:!0}),_e=()=>["/ofertas"],he=t=>["/categoria",t],xe=t=>["/marca",t],Se=()=>["/login"],we=()=>["/registro"],ye=()=>["/admin"],Ee=()=>["/ventas"],ke=()=>["/bodega"],Ie=()=>["/auditor"];function Me(t,i){if(t&1&&(n(0,"a",26),c(1),o()),t&2){let e=i.$implicit;l("routerLink",G(2,he,e.id)),a(),f(" ",e.nombre," ")}}function Ae(t,i){if(t&1&&(n(0,"a",26),c(1),o()),t&2){let e=i.$implicit;l("routerLink",G(2,xe,e.id)),a(),f(" ",e.nombre," ")}}function De(t,i){if(t&1&&(n(0,"ul",16)(1,"li",17)(2,"a",18),c(3,"Home"),o()(),n(4,"li",19)(5,"a",20),s(6,"i",21),c(7,"Categor\xEDas "),o(),n(8,"div",13),u(9,Me,2,4,"a",22),o()(),n(10,"li",19)(11,"a",20),s(12,"i",23),c(13,"Marcas "),o(),n(14,"div",13),u(15,Ae,2,4,"a",22),o()(),n(16,"li",17)(17,"a",24),s(18,"i",25),c(19,"Ofertas "),o()()()),t&2){let e=m();a(2),l("routerLink",_(5,be))("routerLinkActiveOptions",_(6,Ce)),a(7),l("ngForOf",e.categorias),a(6),l("ngForOf",e.marcas),a(2),l("routerLink",_(7,_e))}}function Oe(t,i){if(t&1&&(n(0,"div",16)(1,"span",27),s(2,"i",28),c(3),o()()),t&2){let e=m();a(3),f("",e.getCurrentViewTitle()," ")}}function Pe(t,i){if(t&1){let e=k();n(0,"li")(1,"a",31),C("click",function(){let d=v(e).$implicit,p=m(2);return g(p.onDivisaChange(d.code))})("keydown.enter",function(){let d=v(e).$implicit,p=m(2);return g(p.onDivisaChange(d.code))})("keydown.space",function(){let d=v(e).$implicit,p=m(2);return g(p.onDivisaChange(d.code))}),s(2,"i",32),n(3,"span",33)(4,"strong"),c(5),o(),c(6),o()()()}if(t&2){let e=i.$implicit,r=m(2);a(),Y("active",e.code===r.selectedDivisa),W("aria-selected",e.code===r.selectedDivisa),a(),X("visibility",e.code===r.selectedDivisa?"visible":"hidden"),a(3),w(e.code),a(),f(" - ",e.name," ")}}function Re(t,i){if(t&1&&(n(0,"div",10)(1,"button",11),s(2,"i",29),c(3),o(),n(4,"ul",13),u(5,Pe,7,7,"li",30),o()()),t&2){let e=m();a(3),f(" ",e.selectedDivisa," "),a(2),l("ngForOf",e.availableDivisas)}}function Te(t,i){t&1&&(O(0),n(1,"li")(2,"a",26),s(3,"i",34),c(4," Iniciar sesi\xF3n "),o()(),n(5,"li"),s(6,"hr",35),o(),n(7,"li")(8,"a",26),s(9,"i",36),c(10," Registrarse "),o()(),P()),t&2&&(a(2),l("routerLink",_(2,Se)),a(6),l("routerLink",_(3,we)))}function Ne(t,i){t&1&&(O(0),n(1,"li"),s(2,"hr",35),o(),n(3,"li")(4,"h6",41),s(5,"i",42),c(6,"Panel de Administraci\xF3n "),o()(),n(7,"li")(8,"a",26),s(9,"i",43),c(10," Gesti\xF3n de Usuarios "),o()(),n(11,"li")(12,"a",26),s(13,"i",44),c(14," Vista Ventas "),o()(),n(15,"li")(16,"a",26),s(17,"i",45),c(18," Vista Bodega "),o()(),n(19,"li")(20,"a",26),s(21,"i",46),c(22," Vista Auditor "),o()(),P()),t&2&&(a(8),l("routerLink",_(4,ye)),a(4),l("routerLink",_(5,Ee)),a(4),l("routerLink",_(6,ke)),a(4),l("routerLink",_(7,Ie)))}function Ve(t,i){if(t&1){let e=k();O(0),n(1,"li")(2,"span",37),s(3,"i",38),n(4,"strong"),c(5),o()()(),u(6,Ne,23,8,"ng-container",14),n(7,"li"),s(8,"hr",35),o(),n(9,"li")(10,"a",39),C("click",function(d){return v(e),m().logout(),g(d.preventDefault())}),s(11,"i",40),c(12," Cerrar sesi\xF3n "),o()(),P()}if(t&2){let e=m();a(5),f("Bienvenido ",e.getUserName(),""),a(),l("ngIf",e.getUserRole()==="ADMIN")}}function Fe(t,i){if(t&1&&(n(0,"span",50),c(1),n(2,"span",51),c(3,"productos en carrito"),o()()),t&2){let e=m(2);a(),f(" ",e.cantidadCarrito," ")}}function Be(t,i){if(t&1&&(n(0,"button",47),s(1,"i",48),u(2,Fe,4,1,"span",49),o()),t&2){let e=m();a(2),l("ngIf",e.cantidadCarrito>0)}}var U=class t{constructor(i,e,r,d,p,J){this.categoriaService=i;this.carritoService=e;this.divisaService=r;this.marcaService=d;this.authService=p;this.router=J;this.divisaService.selectedDivisa$.subscribe($=>{this.selectedDivisa=$}),this.divisaService.rates$.subscribe($=>{this.availableDivisas=$,setTimeout(()=>this.initializeDropdowns(),50)})}categorias=[];marcas=[];cantidadCarrito=0;selectedDivisa="CLP";availableDivisas=[];ngOnInit(){this.categoriaService.getCategorias().subscribe(i=>{this.categorias=i,setTimeout(()=>this.initializeDropdowns(),50)}),this.carritoService.itemsCarrito$.subscribe(i=>{this.cantidadCarrito=this.carritoService.obtenerCantidadTotal()}),this.marcaService.getMarcas().subscribe(i=>{this.marcas=i,console.log("Marcas cargadas:",this.marcas),setTimeout(()=>this.initializeDropdowns(),50)})}ngAfterViewInit(){setTimeout(()=>{this.initializeDropdowns()},100)}initializeDropdowns(){if(typeof window.bootstrap<"u"){let i=document.querySelectorAll('[data-bs-toggle="dropdown"]');i.forEach(e=>{window.bootstrap.Dropdown.getInstance(e)||new window.bootstrap.Dropdown(e)}),console.log(`\u2705 Inicializados ${i.length} dropdowns de Bootstrap`)}}onDivisaChange(i){this.divisaService.setSelectedDivisa(i),this.closeAllDropdowns()}closeAllDropdowns(){typeof window.bootstrap<"u"&&document.querySelectorAll('[data-bs-toggle="dropdown"]').forEach(i=>{let e=window.bootstrap.Dropdown.getInstance(i);e&&e.hide()})}getUserName(){try{let i=this.authService.getCurrentUser();return i&&(i.nombre.split(" ")[0]||i.email)||"Usuario"}catch(i){return console.error("Error obteniendo nombre de usuario:",i),"Usuario"}}getUserRole(){try{return this.authService.getUserRole()||""}catch(i){return console.error("Error obteniendo rol de usuario:",i),""}}logout(){this.authService.logout(),this.closeAllDropdowns()}isPublicNavigationAllowed(){if(!this.authService.isAuthenticated())return!0;let i=this.getUserRole();return i==="ADMIN"||i==="CLIENTE"||!i}getCurrentViewTitle(){let i=this.getUserRole(),e=this.router.url;if(e.includes("/ventas"))return"Panel de Ventas";if(e.includes("/bodega"))return"Panel de Bodega";if(e.includes("/auditor"))return"Panel de Auditor\xEDa";if(e.includes("/admin"))return"Panel de Administraci\xF3n";switch(i){case"VENDEDOR":return"Panel de Ventas";case"BODEGUERO":return"Panel de Bodega";case"AUDITOR":return"Panel de Auditor\xEDa";case"ADMIN":return"Panel de Administraci\xF3n";default:return"Panel de Usuario"}}static \u0275fac=function(e){return new(e||t)(b(ae),b(B),b(ce),b(se),b(E),b(y))};static \u0275cmp=S({type:t,selectors:[["app-navbar"]],decls:19,vars:7,consts:[["data-bs-theme","light",1,"navbar","navbar-expand-lg","bg-secondary","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","logo_ferremas.png","alt","","height","40",1,"logo","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarColor01","aria-controls","navbarColor01","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarColor01",1,"collapse","navbar-collapse"],["class","navbar-nav me-auto",4,"ngIf"],[1,"d-flex","align-items-center"],["class","dropdown me-3",4,"ngIf"],[1,"dropdown","me-3"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-light","dropdown-toggle","border-0"],[1,"fas","fa-user","me-1"],[1,"dropdown-menu"],[4,"ngIf"],["class","btn btn-outline-light position-relative border-0 me-3","type","button","data-bs-toggle","modal","data-bs-target","#modalCarrito",4,"ngIf"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],[1,"nav-item","dropdown"],["data-bs-toggle","dropdown","href","#","role","button","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-th-large","me-1"],["class","dropdown-item",3,"routerLink",4,"ngFor","ngForOf"],[1,"fas","fa-tags","me-1"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"fas","fa-percent","me-1"],[1,"dropdown-item",3,"routerLink"],[1,"nav-link","active","fw-bold"],[1,"fas","fa-user-cog","me-2"],[1,"fas","fa-money-bill-wave","me-1"],[4,"ngFor","ngForOf"],["role","button","tabindex","0",1,"dropdown-item","currency-item",3,"click","keydown.enter","keydown.space"],[1,"fas","fa-check","me-2","check-icon"],[1,"currency-info"],[1,"fas","fa-sign-in-alt","me-2"],[1,"dropdown-divider"],[1,"fas","fa-user-plus","me-2"],[1,"dropdown-item-text"],[1,"fas","fa-user-circle","me-2","text-primary"],["href","#",1,"dropdown-item",3,"click"],[1,"fas","fa-sign-out-alt","me-2","text-primary"],[1,"dropdown-header"],[1,"fas","fa-cog","me-2"],[1,"fas","fa-users-cog","me-2","text-primary"],[1,"fas","fa-chart-line","me-2","text-success"],[1,"fas","fa-warehouse","me-2","text-warning"],[1,"fas","fa-search","me-2","text-info"],["type","button","data-bs-toggle","modal","data-bs-target","#modalCarrito",1,"btn","btn-outline-light","position-relative","border-0","me-3"],[1,"fas","fa-shopping-cart","fa-xl"],["class","position-absolute badge rounded-pill bg-danger carrito-badge",4,"ngIf"],[1,"position-absolute","badge","rounded-pill","bg-danger","carrito-badge"],[1,"visually-hidden"]],template:function(e,r){e&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),s(3,"img",3),o(),n(4,"button",4),s(5,"span",5),o(),n(6,"div",6),u(7,De,20,8,"ul",7)(8,Oe,4,1,"div",7),n(9,"div",8),u(10,Re,6,2,"div",9),n(11,"div",10)(12,"button",11),s(13,"i",12),c(14),o(),n(15,"ul",13),u(16,Te,11,4,"ng-container",14)(17,Ve,13,2,"ng-container",14),o()(),u(18,Be,3,1,"button",15),o()()()()),e&2&&(a(7),l("ngIf",r.isPublicNavigationAllowed()),a(),l("ngIf",!r.isPublicNavigationAllowed()&&r.authService.isAuthenticated()),a(2),l("ngIf",r.isPublicNavigationAllowed()),a(4),f(" ",r.authService.isAuthenticated()?r.getUserName():""," "),a(2),l("ngIf",!r.authService.isAuthenticated()),a(),l("ngIf",r.authService.isAuthenticated()),a(),l("ngIf",r.isPublicNavigationAllowed()))},dependencies:[F,N,V,re,ie,ne],styles:[".logo[_ngcontent-%COMP%]{width:auto;height:3rem;margin:0 auto;display:block}.navbar[_ngcontent-%COMP%]{min-height:4.5rem;padding:.5rem 1rem}.navbar-nav[_ngcontent-%COMP%]{align-items:center}.navbar-brand[_ngcontent-%COMP%]{margin-bottom:0}.navbar-toggler[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:1rem}.currency-item[_ngcontent-%COMP%]{cursor:pointer!important;transition:all .2s ease-in-out;padding:.5rem 1rem;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.currency-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa!important;color:#495057!important;transform:translate(2px)}.currency-item[_ngcontent-%COMP%]:active{background-color:#e9ecef!important}.currency-item.active[_ngcontent-%COMP%]{background-color:#5a5a5a50!important;color:#fff!important;font-weight:500}.currency-item.active[_ngcontent-%COMP%]:hover{background-color:#1f1f1f8f!important;color:#fff!important}.check-icon[_ngcontent-%COMP%]{color:#28a745;font-size:.8rem;min-width:16px}.currency-item.active[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{color:#fff}.currency-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;line-height:1.2}.currency-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}.dropdown-menu[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 .5rem 1rem #00000026;border:1px solid rgba(0,0,0,.1);padding:.5rem 0}@media (max-width: 768px){.currency-item[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem}.currency-info[_ngcontent-%COMP%]{flex-direction:row;gap:.5rem}}.currency-item[_ngcontent-%COMP%]:focus{outline:2px solid #007bff;outline-offset:-2px;background-color:#f8f9fa}.check-icon[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.currency-item[_ngcontent-%COMP%]:hover   .check-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.dropdown-item-text[_ngcontent-%COMP%]{padding:.5rem 1rem;margin-bottom:0;font-size:.9rem;color:#495057;white-space:nowrap;background-color:transparent;border:0}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item[_ngcontent-%COMP%]:hover   .text-danger[_ngcontent-%COMP%]{color:#dc3545!important}"]})};var L=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-footer"]],decls:9,vars:0,consts:[[1,"footer-custom"],[1,"container-fluid"],[1,"footer-content"]],template:function(e,r){e&1&&(n(0,"footer",0)(1,"div",1)(2,"div",2)(3,"p"),c(4,"\xA9 Ferremas. Todos los derechos reservados."),o(),n(5,"p"),c(6,"Pol\xEDtica de Privacidad"),o(),n(7,"p"),c(8,"T\xE9rminos de Servicio"),o()()()())},styles:["[_nghost-%COMP%]{display:block;position:relative}footer[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.125);padding:.5rem 0;font-size:.8rem}.footer-custom[_ngcontent-%COMP%]{background-color:#ff9124;color:#163854;padding:1.5rem 0}.footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;gap:1.5rem}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;color:#163854;font-weight:500}"]})};var h=ue(fe());function Ue(t,i){t&1&&(n(0,"div",11),s(1,"i",12),n(2,"h5",13),c(3,"Tu carrito est\xE1 vac\xEDo"),o(),n(4,"p",13),c(5,"Agrega algunos productos para comenzar"),o()())}function Le(t,i){t&1&&(n(0,"span",45),c(1,"Agotado"),o())}function je(t,i){t&1&&(n(0,"span",46),c(1," \xDAltima unidad "),o())}function ze(t,i){if(t&1&&(n(0,"span",46),c(1),o()),t&2){let e=m().$implicit;a(),f(" \xDAltimas ",e.producto.stock," unidades ")}}function $e(t,i){if(t&1&&(n(0,"span",47),c(1),o()),t&2){let e=m().$implicit;a(),f(" Stock: ",e.producto.stock," unidades ")}}function Ge(t,i){if(t&1&&(n(0,"div",28)(1,"div",48),s(2,"i",49),n(3,"small"),c(4),o()()()),t&2){let e=m().$implicit;a(4),f("Stock m\xE1ximo: ",e.producto.stock," unidades")}}function qe(t,i){if(t&1){let e=k();n(0,"div",21)(1,"div",22),s(2,"img",23),o(),n(3,"div",24)(4,"h6",25),c(5),o(),n(6,"p",26),c(7),o(),n(8,"span",27),c(9),R(10,"conversor"),o(),n(11,"div",28),u(12,Le,2,0,"span",29)(13,je,2,0,"span",30)(14,ze,2,1,"span",30)(15,$e,2,1,"span",31),o()(),n(16,"div",32)(17,"label",33),c(18,"Cantidad"),o(),n(19,"div",34)(20,"button",35),C("click",function(){let d=v(e).$implicit,p=m(2);return g(p.disminuirCantidad(d.producto.id,d.cantidad))}),s(21,"i",36),o(),n(22,"input",37),C("change",function(d){let p=v(e).$implicit,J=m(2);return g(J.actualizarCantidad(p.producto.id,+d.target.value))}),o(),n(23,"button",35),C("click",function(){let d=v(e).$implicit,p=m(2);return g(p.aumentarCantidad(d.producto.id,d.cantidad))}),s(24,"i",38),o()(),u(25,Ge,5,1,"div",39),o(),n(26,"div",22)(27,"label",33),c(28,"Subtotal"),o(),n(29,"div",40),c(30),R(31,"conversor"),o()(),n(32,"div",41)(33,"button",42),C("click",function(){let d=v(e).$implicit,p=m(2);return g(p.eliminarItem(d.producto.id))}),s(34,"i",43),o()(),s(35,"hr",44),o()}if(t&2){let e=i.$implicit,r=m(2);a(2),l("src",e.producto.imagen||"notfound.png",Q)("alt",e.producto.nombre),a(3),w(e.producto.nombre),a(2),w(e.producto.descripcion),a(2),w(T(10,16,r.getPrecioActual(e.producto))),a(3),l("ngIf",e.producto.stock===0),a(),l("ngIf",e.producto.stock===1),a(),l("ngIf",e.producto.stock>1&&e.producto.stock<=5),a(),l("ngIf",e.producto.stock>5),a(5),l("disabled",e.cantidad<=1),a(2),l("value",e.cantidad)("min",1)("max",e.producto.stock||99),a(),l("disabled",e.cantidad>=(e.producto.stock||99)||e.producto.stock===0),a(2),l("ngIf",r.mostrarAvisoStock(e)),a(5),w(T(31,18,e.subtotal))}}function He(t,i){if(t&1){let e=k();n(0,"div"),u(1,qe,36,20,"div",14),n(2,"div",15)(3,"div",16)(4,"button",17),C("click",function(){v(e);let d=m();return g(d.vaciarCarrito())}),s(5,"i",18),c(6," Vaciar carrito "),o()(),n(7,"div",19)(8,"h4"),c(9," Total: "),n(10,"span",20),c(11),R(12,"conversor"),o()()()()()}if(t&2){let e=m();a(),l("ngForOf",e.items)("ngForTrackBy",e.trackByProductoId),a(10),w(T(12,3,e.total))}}function Ke(t,i){if(t&1){let e=k();n(0,"div",50)(1,"button",51),c(2," Seguir comprando "),o(),n(3,"button",52),C("click",function(){v(e);let d=m();return g(d.procederACompra())}),s(4,"i",53),c(5," Proceder a compra "),o()()}}var j=class t{constructor(i,e,r,d){this.carritoService=i;this.compraService=e;this.authService=r;this.router=d}items=[];total=0;ngOnInit(){this.carritoService.itemsCarrito$.subscribe(i=>{this.items=i,this.total=this.carritoService.obtenerTotal()})}getPrecioActual(i){return!i.precios||i.precios.length===0?0:i.precios[0].precio}actualizarCantidad(i,e){let r=this.items.find(p=>p.producto.id===i);if(!r)return;e<1&&(e=1);let d=r.producto.stock||99;e>d&&(e=d,this.mostrarMensajeStockLimitado(d)),e>0&&this.carritoService.actualizarCantidad(i,e)}aumentarCantidad(i,e){let r=this.items.find(p=>p.producto.id===i);if(!r)return;let d=r.producto.stock||99;e<d&&this.carritoService.actualizarCantidad(i,e+1)}disminuirCantidad(i,e){e>1&&this.carritoService.actualizarCantidad(i,e-1)}mostrarAvisoStock(i){let e=i.producto.stock||0;return i.cantidad>=e&&e>0}mostrarMensajeStockLimitado(i){h.default.fire({title:"Stock limitado",text:`Solo hay ${i} unidades disponibles de este producto`,icon:"warning",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"})}eliminarItem(i){this.carritoService.eliminarProducto(i)}vaciarCarrito(){h.default.fire({title:"\xBFVaciar carrito?",text:"Se eliminar\xE1n todos los productos del carrito",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"S\xED, vaciar",cancelButtonText:"Cancelar",reverseButtons:!0}).then(i=>{i.isConfirmed&&(this.carritoService.vaciarCarrito(),h.default.fire({title:"\xA1Carrito vaciado!",text:"Todos los productos han sido eliminados",icon:"success",timer:2e3,showConfirmButton:!1}))})}procederACompra(){if(this.items.length===0){h.default.fire({title:"Carrito vac\xEDo",text:"No hay productos en el carrito",icon:"warning",confirmButtonText:"Entendido",customClass:{confirmButton:"btn btn-primary"}});return}if(!this.authService.isAuthenticated()){this.mostrarModalRegistroCarrito();return}if(this.items.filter(r=>r.producto.stock===0).length>0){h.default.fire({title:"Productos agotados",text:"Hay productos sin stock en tu carrito. Por favor, elim\xEDnalos antes de continuar.",icon:"warning",confirmButtonText:"Entendido"});return}let e=this.items.filter(r=>r.cantidad>(r.producto.stock||0)&&r.producto.stock>0);if(e.length>0){h.default.fire({title:"Cantidad excede stock",text:"Algunos productos tienen cantidades que exceden el stock disponible. Se ajustar\xE1n autom\xE1ticamente.",icon:"info",confirmButtonText:"Continuar"}).then(()=>{e.forEach(r=>{this.carritoService.actualizarCantidad(r.producto.id,r.producto.stock)}),this.procederConCompra()});return}this.procederConCompra()}procederConCompra(){this.compraService.iniciarCompraDesdeCarrito(this.items);let i=document.getElementById("modalCarrito"),e=window.bootstrap.Modal.getInstance(i);e&&e.hide(),setTimeout(()=>{new window.bootstrap.Modal(document.getElementById("modalCompra")).show()},300)}trackByProductoId(i,e){return e.producto.id}mostrarModalRegistroCarrito(){h.default.fire({title:"Inicia sesi\xF3n para continuar",text:"Necesitas estar registrado para proceder con la compra",icon:"info",showCancelButton:!0,showDenyButton:!1,confirmButtonText:"Iniciar sesi\xF3n",cancelButtonText:"Registrarse",reverseButtons:!0,allowOutsideClick:!0,allowEscapeKey:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"}}).then(i=>{i.isConfirmed?(this.cerrarModalCarrito(),this.router.navigate(["/login"])):i.dismiss===h.default.DismissReason.cancel&&(this.cerrarModalCarrito(),this.router.navigate(["/registro"]))})}cerrarModalCarrito(){let i=document.getElementById("modalCarrito"),e=window.bootstrap.Modal.getInstance(i);e&&e.hide()}static \u0275fac=function(e){return new(e||t)(b(B),b(me),b(E),b(y))};static \u0275cmp=S({type:t,selectors:[["app-modal-carrito"]],decls:12,vars:3,consts:[["id","modalCarrito","tabindex","-1","aria-labelledby","modalCarritoLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","modalCarritoLabel",1,"modal-title"],[1,"fas","fa-shopping-cart","me-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"text-center","py-5"],[1,"fas","fa-shopping-cart","fa-3x","text-muted","mb-3"],[1,"text-muted"],["class","row mb-3",4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","mt-4"],[1,"col-md-6"],[1,"btn","btn-outline-warning",3,"click"],[1,"fas","fa-trash","me-2"],[1,"col-md-6","text-end"],[1,"text-success"],[1,"row","mb-3"],[1,"col-md-2"],[1,"img-fluid","rounded",2,"width","80px","height","80px","object-fit","cover",3,"src","alt"],[1,"col-md-4"],[1,"mb-1"],[1,"text-muted","small","mb-1"],[1,"text-success","fw-bold"],[1,"mt-1"],["class","badge bg-danger small",4,"ngIf"],["class","badge bg-warning-red small",4,"ngIf"],["class","text-muted small",4,"ngIf"],[1,"col-md-3"],[1,"form-label","small"],[1,"input-group","input-group-sm"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-minus"],["type","number",1,"form-control","text-center",3,"change","value","min","max"],[1,"fas","fa-plus"],["class","mt-1",4,"ngIf"],[1,"fw-bold","text-success"],[1,"col-md-1"],["title","Eliminar producto",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"mt-3"],[1,"badge","bg-danger","small"],[1,"badge","bg-warning-red","small"],[1,"text-muted","small"],[1,"alert","alert-warning","alert-sm","mb-0","py-1","px-2"],[1,"fas","fa-exclamation-triangle","me-1"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-credit-card","me-2"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),s(5,"i",5),c(6," Carrito de Compras "),o(),s(7,"button",6),o(),n(8,"div",7),u(9,Ue,6,0,"div",8)(10,He,13,5,"div",9),o(),u(11,Ke,6,0,"div",10),o()()()),e&2&&(a(9),l("ngIf",r.items.length===0),a(),l("ngIf",r.items.length>0),a(),l("ngIf",r.items.length>0))},dependencies:[F,N,V,le,de],styles:[".badge.bg-warning-red[_ngcontent-%COMP%]{background-color:#dc3545cc!important;color:#fff!important;border:1px solid rgba(220,53,69,.3)}.alert-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.4!important;cursor:not-allowed!important;background-color:#e9ecef!important;border-color:#dee2e6!important;color:#6c757d!important}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:0 0 auto;min-width:38px}"]})};var z=class t{title="ferremas-front";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"app-layout"],[1,"main-content"]],template:function(e,r){e&1&&(n(0,"div",0),s(1,"app-navbar"),n(2,"main",1),s(3,"router-outlet"),o(),s(4,"app-footer"),o(),s(5,"app-modal-carrito"))},dependencies:[te,U,L,j],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.main-content[_ngcontent-%COMP%]{flex:1;padding-top:70px;width:100%;overflow-x:hidden}app-navbar[_ngcontent-%COMP%]{position:relative;z-index:1030}"]})};var I=class t{constructor(i,e){this.authService=i;this.router=e}canActivate(i){if(!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let e=this.authService.getUserRole();if(!e)return this.router.navigate(["/login"]),!1;let r=i.routeConfig?.path;return({ADMIN:["admin","ventas","bodega","auditor"],VENDEDOR:["ventas"],BODEGUERO:["bodega"],AUDITOR:["auditor"],CLIENTE:[]}[e]||[]).includes(r||"")?!0:(this.redirectToUserHome(e),!1)}redirectToUserHome(i){switch(i){case"VENDEDOR":this.router.navigate(["/ventas"]);break;case"BODEGUERO":this.router.navigate(["/bodega"]);break;case"AUDITOR":this.router.navigate(["/auditor"]);break;case"ADMIN":this.router.navigate(["/admin"]);break;default:this.router.navigate(["/"]);break}}static \u0275fac=function(e){return new(e||t)(M(E),M(y))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})};var x=class t{constructor(i,e){this.authService=i;this.router=e}canActivate(){if(!this.authService.isAuthenticated())return!0;switch(this.authService.getUserRole()){case"VENDEDOR":return this.router.navigate(["/ventas"]),!1;case"BODEGUERO":return this.router.navigate(["/bodega"]),!1;case"AUDITOR":return this.router.navigate(["/auditor"]),!1;case"ADMIN":return!0;case"CLIENTE":return!0;default:return!0}}static \u0275fac=function(e){return new(e||t)(M(E),M(y))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})};var pe=[{path:"",loadComponent:()=>import("./chunk-NLHN5IBK.js").then(t=>t.HomeComponent),canActivate:[x]},{path:"categoria/:id",loadComponent:()=>import("./chunk-6LBKDUQI.js").then(t=>t.CategoriaProductoComponent),canActivate:[x]},{path:"marca/:id",loadComponent:()=>import("./chunk-SXMVNUYQ.js").then(t=>t.MarcaProductoComponent),canActivate:[x]},{path:"registro",loadComponent:()=>import("./chunk-BGAGKWT2.js").then(t=>t.RegistroComponent),canActivate:[x]},{path:"login",loadComponent:()=>import("./chunk-EPNPIDX5.js").then(t=>t.LoginComponent),canActivate:[x]},{path:"ofertas",loadComponent:()=>import("./chunk-V6XNR4XJ.js").then(t=>t.OfertaProductoComponent),canActivate:[x]},{path:"ventas",loadComponent:()=>import("./chunk-I5G46AU6.js").then(t=>t.VentasComponent),canActivate:[I],data:{requiredRole:"VENDEDOR"}},{path:"bodega",loadComponent:()=>import("./chunk-IQO3QE3C.js").then(t=>t.BodegaComponent),canActivate:[I],data:{requiredRole:"BODEGUERO"}},{path:"auditor",loadComponent:()=>import("./chunk-MDQRXLLB.js").then(t=>t.AuditorComponent),canActivate:[I],data:{requiredRole:"AUDITOR"}},{path:"admin",loadComponent:()=>import("./chunk-NYRSFLVX.js").then(t=>t.AdminComponent),canActivate:[I],data:{requiredRole:"ADMIN"}},{path:"**",redirectTo:""}];Z(z,{providers:[oe(pe),ee()]}).catch(t=>console.error(t));
