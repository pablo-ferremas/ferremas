import{a as w,b as T}from"./chunk-PIR5CKZV.js";import{a as E,b as S,c as y}from"./chunk-MKH4L2WN.js";import"./chunk-FTKAUQPB.js";import"./chunk-SZIRPOAJ.js";import"./chunk-QVTE7ZQO.js";import"./chunk-I2XG45E3.js";import"./chunk-OV6FUWXQ.js";import{$ as f,Ca as u,Ha as g,Ma as l,Sb as I,Ta as m,Tb as b,Wb as O,Xa as i,Ya as o,Za as s,_ as p,ab as v,bb as P,cb as c,ib as a,kb as h,lb as _,wb as x,ya as d,zb as C}from"./chunk-TVOLU7LP.js";function F(t,n){t&1&&(i(0,"div",10)(1,"div",11)(2,"span",12),a(3,"Cargando ofertas..."),o()(),i(4,"p",13),a(5,"Cargando productos en oferta..."),o()())}function N(t,n){if(t&1&&(i(0,"div",1)(1,"div",2)(2,"div",14),s(3,"i",15),a(4),o()()()),t&2){let e=c();d(4),h("",e.error," ")}}function A(t,n){t&1&&(i(0,"div",1)(1,"div",2)(2,"div",16)(3,"h4"),s(4,"i",17),a(5,"No hay ofertas disponibles"),o(),i(6,"p"),a(7,"En este momento no tenemos productos con descuento. \xA1Vuelve pronto para ver nuestras nuevas ofertas!"),o()()()())}function j(t,n){if(t&1&&(i(0,"div",26),s(1,"app-card",27),o()),t&2){let e=n.$implicit;d(),m("producto",e)}}function k(t,n){if(t&1){let e=v();i(0,"div")(1,"div",1)(2,"div",2)(3,"div",18)(4,"p",19),s(5,"i",20),a(6),o(),i(7,"div",21),s(8,"i",22),a(9,"\xA1Descuentos activos! "),o()()()(),i(10,"div",1),l(11,j,2,1,"div",23),x(12,"paginacion"),o(),i(13,"div",24)(14,"div",2)(15,"app-paginacion",25),P("pageChanged",function(D){p(e);let V=c();return f(V.onPageChanged(D))}),o()()()()}if(t&2){let e=c();d(6),_(" ",e.totalItems," producto",e.totalItems!==1?"s":""," en oferta "),d(5),m("ngForOf",C(12,7,e.productos,e.currentPage,e.itemsPerPage)),d(4),m("totalItems",e.totalItems)("itemsPerPage",e.itemsPerPage)("currentPage",e.currentPage)("maxVisiblePages",5)}}function z(t,n){t&1&&(i(0,"div",28)(1,"div",2)(2,"div",29)(3,"h5"),s(4,"i",30),a(5,"\xA1Ofertas por tiempo limitado!"),o(),i(6,"p",31),a(7,"Los descuentos mostrados est\xE1n sujetos a disponibilidad de stock."),o()()()())}var M=class t{constructor(n){this.productoService=n}productos=[];loading=!0;error="";currentPage=1;itemsPerPage=8;totalItems=0;ngOnInit(){this.cargarProductosConDescuento()}cargarProductosConDescuento(){this.loading=!0,this.error="",this.productoService.getProductos().subscribe({next:n=>{this.productos=n.filter(e=>e.descuento>0&&!e.oculto),this.totalItems=this.productos.length,this.loading=!1},error:n=>{this.error="Error al cargar las ofertas",this.loading=!1,console.error("Error:",n)}})}onPageChanged(n){this.currentPage=n,window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||t)(u(y))};static \u0275cmp=g({type:t,selectors:[["app-oferta-producto"]],decls:14,vars:5,consts:[[1,"container","mt-5","pt-5"],[1,"row"],[1,"col-12"],[1,"text-center","mb-4"],[1,"fas","fa-percent","me-2","text-danger"],[1,"text-center","text-muted","mb-5"],["class","text-center my-5",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],["class","row mt-5",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted"],["role","alert",1,"alert","alert-danger","text-center"],[1,"fas","fa-exclamation-triangle","me-2"],["role","alert",1,"alert","alert-info","text-center"],[1,"fas","fa-info-circle","me-2"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"text-muted","mb-0"],[1,"fas","fa-tags","me-1"],[1,"badge","bg-danger","fs-6"],[1,"fas","fa-fire","me-1"],["class","col-lg-3 col-md-4 col-sm-6 mb-4",4,"ngFor","ngForOf"],[1,"row","mt-4"],[3,"pageChanged","totalItems","itemsPerPage","currentPage","maxVisiblePages"],[1,"col-lg-3","col-md-4","col-sm-6","mb-4"],[3,"producto"],[1,"row","mt-5"],[1,"alert","alert-warning","text-center"],[1,"fas","fa-clock","me-2"],[1,"mb-0"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"i",4),a(5,"Ofertas Especiales "),o(),i(6,"p",5),a(7,"Aprovecha nuestros descuentos exclusivos"),o()()(),l(8,F,6,0,"div",6)(9,N,5,1,"div",7)(10,A,8,0,"div",7)(11,k,16,11,"div",8)(12,z,8,0,"div",9),o(),s(13,"app-modal-compra")),e&2&&(d(8),m("ngIf",r.loading),d(),m("ngIf",r.error&&!r.loading),d(),m("ngIf",!r.loading&&!r.error&&r.productos.length===0),d(),m("ngIf",!r.loading&&!r.error&&r.productos.length>0),d(),m("ngIf",!r.loading&&!r.error&&r.productos.length>0))},dependencies:[O,I,b,E,w,T,S],styles:[".container[_ngcontent-%COMP%]{min-height:70vh}h1[_ngcontent-%COMP%]{font-weight:700;color:#2c3e50}.text-muted[_ngcontent-%COMP%]{font-size:1.1rem}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}"]})};export{M as OfertaProductoComponent};
