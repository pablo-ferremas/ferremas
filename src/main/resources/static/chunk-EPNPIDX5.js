import{d as P,j as E}from"./chunk-SZIRPOAJ.js";import{a as V,b as N,c as F,d as O,e as T,f as W,n as A,q as D}from"./chunk-QVTE7ZQO.js";import{$ as m,Ca as f,Ha as M,Ma as _,Ta as c,Tb as x,Wb as I,Xa as i,Ya as r,Za as b,_ as l,ab as v,bb as u,cb as y,ib as d,jb as L,kb as S,pb as C,qb as w,rb as h,ya as n}from"./chunk-TVOLU7LP.js";function q(o,t){if(o&1&&(i(0,"div",11),b(1,"i",12),i(2,"div"),d(3),r()()),o&2){let a=y();n(3),L(a.errorMessage)}}function j(o,t){o&1&&b(0,"span",13)}var R=class o{constructor(t,a){this.authService=t;this.router=a}login={email:"",password:""};errorMessage="";isLoading=!1;onLogin(){this.errorMessage="",this.isLoading=!0,this.authService.login(this.login.email,this.login.password).subscribe({next:()=>{console.log("Login exitoso, redirigiendo seg\xFAn rol..."),this.isLoading=!1},error:t=>{console.error("Error en el login:",t),this.isLoading=!1,t.status===401?this.errorMessage="Credenciales incorrectas. Por favor, verifica tu email y contrase\xF1a.":t.status===0?this.errorMessage="Error de conexi\xF3n. Por favor, verifica tu conexi\xF3n a internet.":t.status>=500?this.errorMessage="Error del servidor. Por favor, intenta m\xE1s tarde.":this.errorMessage="Error al iniciar sesi\xF3n. Por favor, intenta nuevamente."}})}clearError(){this.errorMessage&&(this.errorMessage="")}static \u0275fac=function(a){return new(a||o)(f(E),f(P))};static \u0275cmp=M({type:o,selectors:[["app-login"]],decls:17,vars:6,consts:[["loginForm","ngForm"],[1,"container","w-50","py-5"],["class","alert alert-danger d-flex align-items-center mb-3","role","alert",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModelChange","input","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","input","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],["role","alert",1,"alert","alert-danger","d-flex","align-items-center","mb-3"],[1,"fas","fa-exclamation-triangle","me-2"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(a,e){if(a&1){let g=v();i(0,"div",1)(1,"h2"),d(2,"Iniciar sesi\xF3n"),r(),_(3,q,4,1,"div",2),i(4,"form",3,0),u("ngSubmit",function(){return l(g),m(e.onLogin())}),i(6,"div",4)(7,"label",5),d(8,"Correo electr\xF3nico"),r(),i(9,"input",6),h("ngModelChange",function(s){return l(g),w(e.login.email,s)||(e.login.email=s),m(s)}),u("input",function(){return l(g),m(e.clearError())}),r()(),i(10,"div",4)(11,"label",7),d(12,"Contrase\xF1a"),r(),i(13,"input",8),h("ngModelChange",function(s){return l(g),w(e.login.password,s)||(e.login.password=s),m(s)}),u("input",function(){return l(g),m(e.clearError())}),r()(),i(14,"button",9),_(15,j,1,0,"span",10),d(16),r()()()}a&2&&(n(3),c("ngIf",e.errorMessage),n(6),C("ngModel",e.login.email),n(4),C("ngModel",e.login.password),n(),c("disabled",e.isLoading),n(),c("ngIf",e.isLoading),n(),S(" ",e.isLoading?"Ingresando...":"Ingresar"," "))},dependencies:[I,x,D,W,V,N,F,A,T,O],styles:[".container[_ngcontent-%COMP%]{max-width:500px}.alert-danger[_ngcontent-%COMP%]{border-left:4px solid #dc3545;background-color:#f8d7da;border-color:#f5c6cb;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.btn[disabled][_ngcontent-%COMP%]{opacity:.65;cursor:not-allowed}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}@media (max-width: 768px){.container[_ngcontent-%COMP%]{width:90%!important}}"]})};export{R as LoginComponent};
